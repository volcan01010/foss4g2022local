<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<meta name="description" content="Presentation slides for FOSS4G:UK Local, November 2022">
		<meta name="author" content="Dr John A Stevenson">

		<title>FOSS4G:UK 2022 Local at the British Geological Survey</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/bgs.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">


<section>
	<section>
		<h2>Increasing open source adoption at the British Geological Survey</h2>
		<p>
		<span class="small"><a href="https://twitter.com/volcan01010">Dr John A Stevenson</a> / <a href="https://twitter.com/volcan01010">@volcan01010</a></span>
		</p>
		<a href="https://www.bgs.ac.uk"><img src="images/BGS-Logo-Pos-RGB.svg" width=300 style="background:white; border:15px solid white; box-shadow:none;"></a>
		<aside data-markdown class="notes">
			This talk was given as an introduction to the discussion session.
		</aside>
	</section>
</section>

<section>
	<section>
		<h2>⚠️ Warning: bias ahead ⚠️</h2>
		<aside data-markdown class="notes">
	        This presentation will not be an unbiased view.

			1. I have never used ESRI products in anger.  I learned GIS in academia for mapping volcanic deposits, starting with GMT and could do all that I needed with FOSS products.
			2. I am a software developer.  I like to work with plain text files and the command line.  I appreciate not everyone does.

			When I wrote the title, "Increasing adoption of open source at BGS", I thought of it as an observation.
			Actually, I think it is more of a mission statement.

			For pure advocacy, read the report on [Benefits of Open Source](benefits_of_open_source.md) that we wrote in 2017.
		</aside>
	</section>

	<section data-background-size="contain" data-background="images/H3_isopach_map.png"></section>
	<section data-background-size="contain" data-background="images/manipulate_and_plot.png"></section>
</section>

<section>
	<section>
		<h2>About open source software</h2>
		<aside data-markdown class="notes">
			Explanation of source code vs binary, of open source licences and of how open source software is built
		</aside>
	</section>

	<section data-markdown>
		<textarea data-template>
			### Free software != Freeware
			<img src="images/freeware_popups.webp" alt="Screenshot of Windows desktop full of popups" class="r-stretch">
            
		</textarea>
		<aside data-markdown class="notes">
			Freeware / shareware are not the same as free software.
			Do not be put off by Windows apps that install toolbars in your browser or mobile apps filled with ads.

			The "Free" in Free software is Free as in speech, not free as in beer.
			It is sometimes replaced with "libre", which is in contrast to "gratis".
			This gives the term FLOSS.

			Image source: https://www.howtogeek.com/207692/yes-every-freeware-download-site-is-serving-crapware-heres-the-proof/
		</aside>
	</section>

	<section data-markdown>
		<textarea data-template>
			### Open source is everywhere
			<img src="images/browser-engines.png" alt="Web browsers are based on open source" class="r-stretch">
            
		</textarea>
		<aside data-markdown class="notes">
		+ Web browsers are based on open source code
        + Android operating system is based on Linux kernel and is in billions of smart phones
		+ MacOS is based on FreeBSD
		+ The biggest contributors to GDAL/OGR are ESRI and Safe Software (who make FME)

		Image source: https://en.wikipedia.org/wiki/Comparison_of_browser_engines
		</aside>
	</section>

	<section data-markdown>
		<textarea data-template>
			### What does open source mean?

			+ Source code is written by developers.
			+ Binary code is run by computers.

			```sql
Java / C / C++ / Fortran:
 + write -> compile -> share -> run
			```
			
			```sql
Python / JavaScript / R:
 + write -> share -> compile -> run
			```
		</textarea>
		<aside data-markdown class="notes">
			Humans write source code but computers run binary files.
			Binary files are created by the compiler and cannot easily be converted back to the source code.
			A .exe file on Windows is an example of a binary file.
			Open source means that the source code is made available so that users can inspect and modify it.

			Languages such as Java are typically compiled and distributed as binaries.
			Scripting langages such as Python are compiled on the host machine as they are run.
			This allows line-by-line development and the interactive approach that makes them so useful for data analysis.
			It also means that they are open source by default.
		</aside>
	</section>

	<section data-markdown>
		<textarea data-template>
			### Free software licences

			<img src="images/choose_a_license.png" alt="Diagram about licence selection" class="r-stretch">
		</textarea>
		
		<aside data-markdown class="notes">
            Image from [choosealicense.com](https://choosealicense.com).

			Free and open source licences emphasise freedom.
			Users are free to use the code for anything that they want.
			The most important thing is to acknowledge the original authors.
			This includes Mastodon (open source Twitter equivalent) being used for Donald Trump's truth.social.

            The MIT licence is most permissive and only requires users to include the licence notice and acknowledge source.
			GPL3 is recursive and requires code linking to these files also to be released with a GPL3 licence.
			This is the preferred option of the Free Software Foundation because it ensures that everyone benefits.

			The AGPL licence is like the GPL3 but applies to software running on a server.
			It was created to prevent cloud vendors selling products based on open source without contributing anything back.
		</aside>
	</section>

	<section data-markdown>
		<textarea data-template>
			### Open source development

			<img src="images/qgis-github.png" alt="QGIS GitHub page" class="r-stretch">

			[QGIS GitHub repo](https://github.com/qgis/QGIS)

		</textarea>

		<aside data-markdown class="notes">
		  Development takes place in the open.
		  GitHub is the largest place, owned by Microsoft.
		  All the code can be viewed, modified, shared.

		  We use a similar tool, GitLab, for code sharing internally.
		</aside>
	</section>

</section>

<section>
	<section>
		<h2>Advantages of open source software</h2>
		<aside data-markdown class="notes">
			Explanation of advantages of open source software.
		</aside>
	</section>
	<section data-markdown>
		<textarea data-template>
			### Software written to get things done
			<img src="images/windows-lock-screen-cross.png" alt="Windows lock screen with click-bait links" class="r-stretch">
            
		</textarea>
		<aside data-markdown class="notes">
			Open source software is written to get things done; the purpose of proprietary software is to make money.
			These annoying click-bait links on the Windows lock screen will open in the Edge browser, displaying results from Bing search.
			This gives Microsoft a chance to push you towards their products.
			No-one asked for this and it doesn't help get things done, but it does make money.
			If someone tried this in an open source project, someone else would create a fork without the ads and people would use that instead.

			FOSS emphasises solving problems over making money.
			Code is written to solve the problem, so there is no problem giving it away.
			
			If code is written to make money, then some kind of licence key is required to see who has paid.
			This leads to all kinds of extra ways that the software can stop working:
			  + Have no licence
			  + Licence has expired
			  + Too many others are using the licence
			  + Don't have licence dongle with me
			  + Licence server unreachable
			  + Licence server down
			None of these issues exist with open source software.

            Image source: https://answers.microsoft.com/en-us/windows/forum/all/lock-screen-has-no-login-dialogue/b59ab023-f4b3-406f-8066-f792af55c25c
		</aside>
	</section>
	<section data-markdown>
		<textarea data-template>
			### Transparency and portability

			+ People write better code in public
			+ See how your software works and how good it is
			+ Fix problems yourself (or track others fixing them)
			+ Bugs are tracked and visible

			---

			+ Share with colleagues, collaborators, students
			+ Documentation is developed and shared in the community
			+ Rapid installation from central repositories
			+ Set up multiple environments and automated tests
            
		</textarea>
		<aside data-markdown class="notes">
		</aside>
	</section>
	<section data-markdown>
		<textarea data-template>
			### How open source software is built

			<img src="images/pygeoapi-logo.png" alt="pygeoapi logo" width="800">

			[Add CQL to PostgreSQL provider (via pygeofilter and sqlalchemy)](https://github.com/geopython/pygeoapi/pull/964)

			Musical interlude (1:40): [Wellerman](https://www.youtube.com/watch?v=UgsurPg9Ckw) vs [ETLHelper 2.0](https://github.com/BritishGeologicalSurvey/etlhelper/pull/97)
		</textarea>

		<aside data-markdown class="notes">
			As a developer, you can benefit from many solved problems - Standing on the Shoulders of Giants.

			We added the CQL feature to pygeoapi.
			We did this because is was functionality that we required.
			We already used the normal version of pygeoapi and were benfiting from the work of others.
			By adding this feature, others benefit from our work.

			The webpage shows the process of adding the code:
			+ Code on GitHub
			+ Work on a fork and make a pull request
			+ Discuss changes with core developers and make improvements
			+ Code is approved and merged

			Everything is in the open.
			We could see the code and make the changes that we needed - much better than raising a support ticket that you cannot see.
			We can evaluate the quality of the code and make improvements.
			
			Most code is written by a handful of developers e.g. BGS SIGMA is backed by 150+ years organisation with 600 staff, but only 2 core developers.
			With open source, other people can see and improve the code so it is better.

			The Wellerman video was released on TikTok.
			TikTok provides tools to allow users to "duet" and to modify videos created by others.
			Once you release something onto the internet, you can't predict where it will go.

			Our ETL Helper tool got a merge request to add a Database class.
			It was a great idea and something that none of us had thought of.
			We plan to add it into ETL Helper v2.0.
		</aside>
	</section>

	<section data-markdown>
		<textarea data-template>
			### The future of reproducible science?
			<img src="images/egu-open-source-sessions.png" alt="Over 50 open-source sessions at EGU" class="r-stretch">
		</textarea>

		<aside data-markdown class="notes">
		  Reproducibility is central to science.
		  Open source has two advantages:
		    + The details of any algorithms are available to inspect to know exactly what was development
			+ Anyone can download the same software you used to reproduce / extend your work
		  Journals now request that users publish their algorithms alongside their data and papers.
		  At EGU this year there were over 50 sessions mentioning open source including one specifically covering geospatial tools.
		</aside>
	</section>

	<section data-markdown>
		<textarea data-template>
			### The future of scientific publishing?

			<img src="images/joss-logo.png" alt="JOSS logo" width="350">

			[PyVOLCANS in the Journal of Open Source Software]( https://joss.theoj.org/papers/10.21105/joss.03649)
		</textarea>

		<aside data-markdown class="notes">
			We published a paper about our open source library, PyVOLCANS in JOSS.

			The Journal of Open Source Software is hosted on GitHub.
			The review process is handled via GitHub issues and takes place in public.
			On acceptance, the paper publication takes place automatically.

			+ [Initial submission](https://github.com/openjournals/joss-reviews/issues/3649#issuecomment-904199342)
			+ [Reviewer's comments](https://github.com/openjournals/joss-reviews/issues/3649#issuecomment-930210824)
			+ [Acceptance and publication](https://github.com/openjournals/joss-reviews/issues/3649#issuecomment-1003339857)

			JOSS standards for impact are higher than we'd anticipated, so it is only recommended for established libraries with a community beyond the organisation.
		</aside>
	</section>
</section>

<section>
	<section>
		<h2>Addressing enterprise concerns</h2>
		<aside data-markdown class="notes">
			Enterprise concerns are lack of support, security risks and integration with existing tools.
		</aside>
	</section>

	<section>
		<h3>Support</h3>
	</section>

	<section>
		<p>
			<img src="images/gitlab-logo-100.svg" alt="GitLab logo" width="550">
			<img src="images/sonatype_logo.png" alt="Sonatype logo" width="550">
			<img src="images/Anaconda_Logo.png" alt="Anaconda logo" width="400">
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			<img src="images/Red_Hat-Logo_page-Logo-RGB.svg" alt="Red Hat logo" width="550">
		</p>
		<aside data-markdown class="notes">
			We pay for support for open source products from GitLab, Anaconda and Sonatype.

            GitLab and Sonatype work on an open-core model where paying customers get extra features.
			GitLab is a source control and DevOps tool, like a self-hosted GitHub.
			With GitLab we get Epics and integrated security scans in CI pipelines.
			Sonatype is a repository mirror for keeping local copies of software dependencies.
			With Sonatype we get Firewall for blocking vulnerable packages.
		</aside>
	</section>

	<section>
			<img src="images/osgeo_projects.png" alt="OSGEO projects" class="r-stretch">
		<aside data-markdown class="notes">
			Support is also possible for geospatial software.
			OSGEO is a non-profit that aims to promote adoption of FOSS tools.
			This conference is run under their umbrella.

			OSGEO works to ensure that FOSS4G products work well together.
			For example, anything on the list will work with PostGIS, and is probably developed with PostGIS in mind.
			GDAL/OGR and GEOS have Python interfaces called Fiona and Shapely, so when you use those libraries there, it is the same code as QGIS under the hood.

			Many consultancies contribute to and provide support for these products e.g. Astun, Lutra, thinkWhere (now Idox).
			We pay NorthRoad to use Slayer, a tool to convert ESRI layer styles to QGIS-compatible code.
		</aside>
	</section>

	<section>
		<h3>Security</h3>
	</section>

	<section>
			<img src="images/xkcd_dependency.png" alt="XKCD Dependency comic" class="r-stretch">
		<aside data-markdown class="notes">
			Cartoon from [https://xkcd.com/2347](https://xkcd.com/2347)

			This XKCD comic shows how open source tools are built on a tower of dependencies.
			It can be hard to track all the dependencies.
			Many dependencies are built by individuals who may not have the same accountability as companies.
			For example, the developer of the `colors` package in Javascript released an updated that printed anti-war messages if it detected that it was running in Russia.
			Developers can also be hacked or users can be tricked to install malicious code.

            This is most serious with Python and JavaScript because code is run during installation.
			In Python, it is the `setup.py` file in the repository.
			The code could leak passwords, cryptolock your hard drive or mine bitcoin.
		</aside>
	</section>

	<section>
		<h3>Dependency scanning</h3>
			<img src="images/nexus.png" alt="Screenshot of Nexus IQ Firewall" class="r-stretch">
		<aside data-markdown class="notes">
			Sonatype Nexus Firewall allows us to quarantine dangerous packages before they are installed.

			Packages are checked against a database of known vulnerabilities.
			Brand new Python and JavaScript packages cannot be installed until they have been checked.

			BGS recently implemented this.
			For now all Anaconda users on Windows are automatically using the mirrors.
			We will roll out the mirror configuration and increase the strictness of the checking in time.
		</aside>
	</section>

	<section>
		<h3>Integration</h3>
	</section>

	<section>
		<h2 class="r-fit-text"><b><div class="blink_me">STANDARDS!</div></b></h2>
		<aside data-markdown class="notes">
			The easiest way to ensure that data are interoperable is to follow standards.

			It seems like some of the big players don't follow standards, because interoperability makes it easier for people to switch to open source.
		</aside>
	</section>

	<section>
		<h4>Multiple approaches to interact with Oracle Spatial</h4>
			<img src="images/003_single_vm_and_etl.png" alt="ETLHelper to FROST API" class="r-stretch">
		<aside data-markdown class="notes">
			Our main issue is communication with Oracle.
			There are a number of approaches:

			+ QGIS can connect directly to Oracle on Windows with Instant Client.  This works on Windows and would allow direct editing of spatial tables.
			+ Can compile custom GDAL/OGR for Linux

			Alternatively, we can transfer the data from Oracle to PostGIS.
            
            + For ogcapi.bgs.ac.uk we use the PostgreSQL oracle_fdw to copy tables directly into the database
			+ For sensors.bgs.ac.uk we use `etlhelper` to transform data and post to database via the API

			Next step is getting pipelines to edit data in open source tools then synchronise with Oracle.
			Perhaps GeoNetwork will be our first target.
		</aside>
	</section>
</section>

<section>
	<section>
		<h2>Open source alternatives to proprietary tools</h2>
		<aside data-markdown class="notes">
			There are open source alternatives for most proprietary tools.
		</aside>
	</section>

	<section data-markdown>
		<textarea data-template>
			### Spatial Data

			|Proprietary|FOSS|
			|---|---|
			|Oracle Spatial|PostGIS|
			|Arc server|Geoserver, Mapserver, pygeoapi|
			|FME|ogr2ogr, etlhelper, QGIS processing|
			|ArcGIS | QGIS |
			|ArcPy | GRASS, geopandas, R-spatial|
			|ESRI Field Maps | Mergin Maps, QField |
		</textarea>

		<aside data-markdown class="notes">
			These are areas where BGS has a huge infrastructure and any change would need to be gradual.
		</aside>
	</section>

	<section data-markdown>
		<textarea data-template>
			### Analysis and research

			|Proprietary|FOSS|
			|---|---|
			|Matlab| Python, R|
			|CorelDraw, Illustrator|Inkscape|
			|Photoshop|GIMP|
		</textarea>

		<aside data-markdown class="notes">
			Spatial data processing and analysis are adopting these tools with enthusiasm as they provide reproducible methods.
		</aside>
	</section>

	<section data-markdown>
		<textarea data-template>
			### Business

			| Proprietary | FOSS |
			|---|---|
			| Microsoft Office | LibreOffice + NextCloud |
			| Microsoft Teams | Matrix / Element |
			| Microsoft Windows | Ubuntu Linux |
		</textarea>

		<aside data-markdown class="notes">
			These may be wishful thinking, but then again, why not?
		</aside>
	</section>
</section>

<section>
	<section>
		<h2>Open source in the news</h2>
		<aside data-markdown class="notes">
			Some examples where the open source philosophy is in the news.
		</aside>
	</section>

	<section>
		<h3>Right to repair</h3>
			<img src="images/john_deere.png" alt="Hacked John Deere console" class="r-stretch">
		<aside data-markdown class="notes">
			An example where open source can save the world from evil corporations.
			https://www.theregister.com/2022/08/16/john_deere_doom/

			John Deere tractors are controlled by computers.
			Users are not permitted to see or modify the code that they run on.
            This means that you cannot get your tractor serviced anywhere other than at John Deere.
			Tesla have similar policies.

			There is a growing "right to repair" movement in America.
			If Americans love anything more than business, it's their vehicles.
			If the movement wins then open source firmware allows customers to own what they have bought again.
		</aside>
	</section>

	<section>
		<h3>Artificial Intelligence</h3>
			<img src="images/github_copilot.png" alt="GitHub Copilot logo" class="r-stretch">
		<aside data-markdown class="notes">
			An example where the corporations are flexing their muscle to ignore open source licences
			https://www.theregister.com/2022/11/11/githubs_copilot_opinion/

			GitHub have released CoPilot.
			It is an artificial intelligence for code completion.
			It has been trained on millions of lines of code, much of which is open source (including GPL licences).
			Microsoft claim that the models don't contain the code itself, but some of the code that it produces is verbatim copies of open source material.
			The GitHub terms of service say that Microsoft can use your code.
			Microsoft are charging for this, but they didn't pay developers and don't generate acknowledgements.
			They are being sued.

			Since this talk was first given, ChatGPT and other AI systems have been released.
			Beyond licencing issues, open source is also relevant because:
			  + Open source models will democratise AI and allow uses away from big corporations
			  + Free software unfortunately also means that it can be used to create any specialism that you want e.g. fascist
			  + For full transparency, it will also be necessary to publish training data as well as code.
		</aside>
	</section>

</section>
<section>
	<section>
		<h3>Thank you</h3>
		<aside data-markdown class="notes">
			Thank you.
		</aside>
	</section>
</section>


	</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,
				width: 1152,
				height: 840,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
